<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://wangzhengquan.github.io/blog/GDB/gdb%20demo/gdb%20demo/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.3.9"><title>gdb demo - My Blogs</title><link rel=stylesheet href=../../../assets/stylesheets/main.1d29e8d0.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=none data-md-color-accent=none> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#source-code class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="My Blogs" class="md-header__button md-logo" aria-label="My Blogs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> My Blogs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> gdb demo </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="My Blogs" class="md-nav__button md-logo" aria-label="My Blogs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> My Blogs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> 简介 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Algorithms data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Algorithms/Using_a_Stack_to_Evaluate_an_Expression/ class=md-nav__link> Using a Stack to Evaluate an Expression </a> </li> <li class=md-nav__item> <a href=../../../Algorithms/Using%20two%20stacks%20to%20Evaluate%20an%20Expression/ class=md-nav__link> Using two stacks to Evaluate an Expression </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Linux/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/ class=md-nav__link> Linux常用命令 </a> </li> <li class=md-nav__item> <a href=../../../Linux/Shell%20Script/ class=md-nav__link> Shell Script </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> MacOS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=MacOS data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> MacOS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../MacOS/Launching%20Custom%20Daemons%20Using%20launchd/ class=md-nav__link> Launching Custom Daemons Using launchd </a> </li> <li class=md-nav__item> <a href=../../../MacOS/MacOS%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/ class=md-nav__link> MacOS常用命令 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Unbuntu <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Unbuntu data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Unbuntu </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Unbuntu/fix-the-no-wi-fi-adapter-found-error-on-ubuntu/ class=md-nav__link> Fix “No Wi-Fi Adapter Found” Error on Ubuntu </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Vim <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Vim data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Vim </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Vim/vim%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/ class=md-nav__link> Vim常用命令 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> 编辑器 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=编辑器 data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> 编辑器 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../%E7%BC%96%E8%BE%91%E5%99%A8/Sublime/ class=md-nav__link> Sublime </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> GCC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=GCC data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> GCC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../GCC/GCC%20compiling%20processes/ class=md-nav__link> GCC compiling processes </a> </li> <li class=md-nav__item> <a href=../../../GCC/GCC%20Linking/ class=md-nav__link> GCC Linking </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_9 type=checkbox id=__nav_9 checked> <label class=md-nav__link for=__nav_9> GDB <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=GDB data-md-level=1> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> GDB </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> gdb demo <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> gdb demo </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#source-code class=md-nav__link> Source Code </a> </li> <li class=md-nav__item> <a href=#compiling class=md-nav__link> Compiling </a> </li> <li class=md-nav__item> <a href=#starting-the-debugger class=md-nav__link> Starting The Debugger </a> </li> <li class=md-nav__item> <a href=#breakpoints class=md-nav__link> Breakpoints </a> <nav class=md-nav aria-label=Breakpoints> <ul class=md-nav__list> <li class=md-nav__item> <a href=#break-point class=md-nav__link> Break point </a> </li> <li class=md-nav__item> <a href=#condition-break-point class=md-nav__link> Condition break point </a> </li> <li class=md-nav__item> <a href=#setchange-the-condition class=md-nav__link> Set/change the condition </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#watchpoints class=md-nav__link> Watchpoints </a> </li> <li class=md-nav__item> <a href=#stepping class=md-nav__link> Stepping </a> <nav class=md-nav aria-label=Stepping> <ul class=md-nav__list> <li class=md-nav__item> <a href=#next-statement class=md-nav__link> Next statement </a> </li> <li class=md-nav__item> <a href=#step-into-subroutine class=md-nav__link> Step into subroutine </a> </li> <li class=md-nav__item> <a href=#finish class=md-nav__link> finish </a> </li> <li class=md-nav__item> <a href=#continue class=md-nav__link> continue </a> </li> <li class=md-nav__item> <a href=#advance class=md-nav__link> Advance </a> </li> <li class=md-nav__item> <a href=#next-instruction class=md-nav__link> Next instruction </a> </li> <li class=md-nav__item> <a href=#step-instruction class=md-nav__link> Step instruction </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#examining-variables-and-memory class=md-nav__link> Examining Variables and memory </a> <nav class=md-nav aria-label="Examining Variables and memory"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#print-variables class=md-nav__link> Print Variables </a> </li> <li class=md-nav__item> <a href=#print-array class=md-nav__link> Print Array </a> </li> <li class=md-nav__item> <a href=#display-variables class=md-nav__link> Display Variables </a> </li> <li class=md-nav__item> <a href=#examining-memory class=md-nav__link> Examining Memory </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#examining-the-call-stack class=md-nav__link> Examining the call stack </a> </li> <li class=md-nav__item> <a href=#directory class=md-nav__link> directory </a> </li> <li class=md-nav__item> <a href=#listing-source-code class=md-nav__link> Listing Source Code </a> </li> <li class=md-nav__item> <a href=#call-function class=md-nav__link> Call function </a> </li> <li class=md-nav__item> <a href=#informations class=md-nav__link> Informations </a> </li> <li class=md-nav__item> <a href=#disassemble class=md-nav__link> Disassemble </a> </li> <li class=md-nav__item> <a href=#layout class=md-nav__link> Layout </a> </li> <li class=md-nav__item> <a href=#help class=md-nav__link> Help </a> </li> <li class=md-nav__item> <a href=#gdb-dashboard class=md-nav__link> GDB dashboard </a> </li> <li class=md-nav__item> <a href=#some-other-commands class=md-nav__link> Some other commands </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../gdbnotes-x86-64.pdf class=md-nav__link> Summary of GDB commands </a> </li> <li class=md-nav__item> <a href=../../GDB%20Cheat%20Sheet.pdf class=md-nav__link> GDB Cheat Sheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10 type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10> Markdown <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Markdown data-md-level=1> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Markdown </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Markdown/Markdown%20Syntax/ class=md-nav__link> Markdown Syntax </a> </li> <li class=md-nav__item> <a href=../../../Markdown/Markdown%E6%A8%A1%E7%89%88/ class=md-nav__link> Markdown模版 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11 type=checkbox id=__nav_11> <label class=md-nav__link for=__nav_11> SSH <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=SSH data-md-level=1> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> SSH </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../SSH/SSH%20login%20without%20password/ class=md-nav__link> SSH login without password </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#source-code class=md-nav__link> Source Code </a> </li> <li class=md-nav__item> <a href=#compiling class=md-nav__link> Compiling </a> </li> <li class=md-nav__item> <a href=#starting-the-debugger class=md-nav__link> Starting The Debugger </a> </li> <li class=md-nav__item> <a href=#breakpoints class=md-nav__link> Breakpoints </a> <nav class=md-nav aria-label=Breakpoints> <ul class=md-nav__list> <li class=md-nav__item> <a href=#break-point class=md-nav__link> Break point </a> </li> <li class=md-nav__item> <a href=#condition-break-point class=md-nav__link> Condition break point </a> </li> <li class=md-nav__item> <a href=#setchange-the-condition class=md-nav__link> Set/change the condition </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#watchpoints class=md-nav__link> Watchpoints </a> </li> <li class=md-nav__item> <a href=#stepping class=md-nav__link> Stepping </a> <nav class=md-nav aria-label=Stepping> <ul class=md-nav__list> <li class=md-nav__item> <a href=#next-statement class=md-nav__link> Next statement </a> </li> <li class=md-nav__item> <a href=#step-into-subroutine class=md-nav__link> Step into subroutine </a> </li> <li class=md-nav__item> <a href=#finish class=md-nav__link> finish </a> </li> <li class=md-nav__item> <a href=#continue class=md-nav__link> continue </a> </li> <li class=md-nav__item> <a href=#advance class=md-nav__link> Advance </a> </li> <li class=md-nav__item> <a href=#next-instruction class=md-nav__link> Next instruction </a> </li> <li class=md-nav__item> <a href=#step-instruction class=md-nav__link> Step instruction </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#examining-variables-and-memory class=md-nav__link> Examining Variables and memory </a> <nav class=md-nav aria-label="Examining Variables and memory"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#print-variables class=md-nav__link> Print Variables </a> </li> <li class=md-nav__item> <a href=#print-array class=md-nav__link> Print Array </a> </li> <li class=md-nav__item> <a href=#display-variables class=md-nav__link> Display Variables </a> </li> <li class=md-nav__item> <a href=#examining-memory class=md-nav__link> Examining Memory </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#examining-the-call-stack class=md-nav__link> Examining the call stack </a> </li> <li class=md-nav__item> <a href=#directory class=md-nav__link> directory </a> </li> <li class=md-nav__item> <a href=#listing-source-code class=md-nav__link> Listing Source Code </a> </li> <li class=md-nav__item> <a href=#call-function class=md-nav__link> Call function </a> </li> <li class=md-nav__item> <a href=#informations class=md-nav__link> Informations </a> </li> <li class=md-nav__item> <a href=#disassemble class=md-nav__link> Disassemble </a> </li> <li class=md-nav__item> <a href=#layout class=md-nav__link> Layout </a> </li> <li class=md-nav__item> <a href=#help class=md-nav__link> Help </a> </li> <li class=md-nav__item> <a href=#gdb-dashboard class=md-nav__link> GDB dashboard </a> </li> <li class=md-nav__item> <a href=#some-other-commands class=md-nav__link> Some other commands </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>gdb demo</h1> <h2 id=source-code>Source Code</h2> <p>map.c</p> <pre><code class=language-c>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

/* A statically allocated variable */
int foo;

/* UNCOMMENT THIS LINE for 3.4.3*/
extern int recur(int i);


/* A statically allocated, pre-initialized variable */
volatile int stuff = 7;

int main(int argc, char *argv[]) {
    /* A stack allocated variable */
    volatile int n = 3;

    int arr[] = {1, 2, 3, 4, 5};

    if(argc=2)  
      n = atoi(argv[1]);

    /* Dynamically allocate some stuff */
    char *buf1 = malloc(100);
    /* ... and some more stuff */
    volatile char *buf2 = malloc(100);

    sprintf(buf1, &quot;hello world&quot;);
    recur(n);
    return 0;
}

</code></pre> <p>recurse.c</p> <pre><code class=language-c>#include &lt;stdio.h&gt;

int recur(int i) {
    /* A stack allocated variable within a recursive function */
    int j = i;
    printf(&quot;%i\n&quot;, i);

    if (i &gt; 0) {
        return recur(i - 1);
    }

    return 0;
}

</code></pre> <h2 id=compiling>Compiling</h2> <p>You have to tell your compiler to compile your code with symbolic debugging information included. Here's how to do it with gcc, with the -g switch:</p> <pre><code>gcc -g map.c recurse.c -o map
</code></pre> <h2 id=starting-the-debugger>Starting The Debugger</h2> <p>To start the gdb and pass arguments, type the command in the terminal</p> <pre><code>gdb --args &lt;program&gt; &lt;args...&gt;
</code></pre> <p>If the program has no arguments, just type </p> <pre><code>gdb  &lt;program&gt;
</code></pre> <p>Fot this demo, we launch a program called map in the debugger and pass argument 5.</p> <pre><code>$ gdb --args map 5
</code></pre> <h2 id=breakpoints>Breakpoints</h2> <h3 id=break-point>Break point</h3> <p>To set a new breakpoint, You use the break or b command, and specify a location, which can be a function name, line number, or source file:line number.</p> <pre><code>break &lt;where&gt;
</code></pre> <p>Where</p> <ul> <li>line_number</li> <li>function_name</li> <li>file:line_number/function_name</li> </ul> <p>For this demo, let's set a breakpoint at main(), and start the program:</p> <pre><code>(gdb) break main
Breakpoint 1 at 0x6e9: file map.c, line 18.
</code></pre> <p>when you type <code>run</code> command , program will suspend at the first break point it encounter.</p> <pre><code>(gdb) run
Starting program: /home/vagrant/code/personal/hw-intro/map 5

Breakpoint 1, main (argc=2, argv=0x7fffffffe3a8) at map.c:18
18      if(argc&lt;2) n= 3;
(gdb) 
</code></pre> <h3 id=condition-break-point>Condition break point</h3> <pre><code>break &lt;where&gt; if &lt;condition&gt; 
</code></pre> <p>Break at the given location if the condition is met. Conditions may be almost any C expression that evaluate to true or false.</p> <pre><code>(gdb) break recur if i==1
Breakpoint 2 at 0x55555555475e: file recurse.c, line 5.
(gdb) continue
Continuing.

Breakpoint 2, recur (i=1) at recurse.c:5
5       int j = i;
(gdb) print i
$1 = 1
</code></pre> <h3 id=setchange-the-condition>Set/change the condition</h3> <pre><code>condition &lt;breakpoint#&gt; &lt;condition&gt; 
</code></pre> <p>Set/change the condition of an existing breakpoint.</p> <pre><code>(gdb) condition 2 i==0
</code></pre> <h2 id=watchpoints>Watchpoints</h2> <pre><code>watch &lt;expression&gt;
</code></pre> <p>Note that watch takes an expression as an argument, so you can put a variable name in there, or something more complex like <code>*(p+5)</code> or <code>a[15]</code></p> <p>watchpoints are special breakpoints that will trigger whenever an expression changes. Often you just want to know when a variable changes (is written to), and for that you can use the watch command:</p> <pre><code>(gdb) watch n
Hardware watchpoint 2: n
(gdb) next

Hardware watchpoint 2: n

Old value = 21845
New value = 3
main (argc=2, argv=0x7fffffffe3a8) at map.c:18
18      if(argc=2)  
(gdb) 
19        n = atoi(argv[1]);
(gdb) 

Hardware watchpoint 2: n

Old value = 3
New value = 5
main (argc=2, argv=0x7fffffffe3a8) at map.c:22
22      char *buf1 = malloc(100);
(gdb) 
</code></pre> <h2 id=stepping>Stepping</h2> <h3 id=next-statement>Next statement</h3> <p>Step N statements, proceeding through subroutine calls.</p> <pre><code>next [N]
</code></pre> <p>Unlike "step", if the current source line calls a subroutine, this command does not enter the subroutine, but instead steps over the call, in effect treating it as a single source line.</p> <pre><code>(gdb) next
19      else n = atoi(argv[1]);
(gdb) 
</code></pre> <p>Hitting Enter key will repeat the last command, this will save you typing <code>next</code> over and over again.</p> <h3 id=step-into-subroutine>Step into subroutine</h3> <pre><code>step [N]
</code></pre> <p>Step statement, if it's a subroutine call it will enter into the subroutine.</p> <pre><code>27      recur(n);
(gdb) step 
recur (i=5) at recurse.c:5
5       int j = i;
(gdb) 
</code></pre> <h3 id=finish>finish</h3> <pre><code>finish
</code></pre> <p>Continue until the current function returns.</p> <h3 id=continue>continue</h3> <pre><code>continue
</code></pre> <p>Continue normal execution until the end of programe or the next breakpoint.</p> <h3 id=advance>Advance</h3> <pre><code>advance &lt;where&gt;
</code></pre> <p>To continue to a specific location, use the advance command, specifying a location like those shown in the "Breakpoints" section, above. Here's an example which advances from the current location until the function "recur()" is called:</p> <pre><code>(gdb) advance recur
recur (i=5) at recurse.c:5
5       int j = i;
(gdb) 
</code></pre> <p>advance is just shorthand for "continue to this temporary breakpoint."</p> <h3 id=next-instruction>Next instruction</h3> <pre><code>nexti [N]
</code></pre> <p>Step a single assembly instruction, but proceed through subroutine calls.</p> <h3 id=step-instruction>Step instruction</h3> <pre><code>stepi [N]
</code></pre> <p>Step a single assembly. It means that if it's a subroutine call it will enter into the function.</p> <h2 id=examining-variables-and-memory>Examining Variables and memory</h2> <h3 id=print-variables>Print Variables</h3> <p>Print content of variable/memory location/register.</p> <pre><code>print/format &lt;what&gt;
</code></pre> <p>Format </p> <ul> <li>a: Pointer.</li> <li>c: Read as integer, print as character. d Integer, signed decimal.</li> <li>f: Floating point number.</li> <li>o: Integer, print as octal.</li> <li>s: Try to treat as C string.</li> <li>t: Integer, print as binary (t = "two“).</li> <li>u: Integer, unsigned decimal.</li> <li>x: Integer, print as hexadecimal.</li> </ul> <p>What</p> <ul> <li>"expression" Almost any C expression, including function calls (must be prefixed with a cast to tell GDB the return value type).</li> <li>"file_name::variable_name" Content of the variable defined in the named file (static variables).</li> <li>"function::variable_name" Content of the variable defined in the named function (if on the stack).</li> <li>"{type}address" Content at address, interpreted as being of the C type type.</li> <li>"$register" Content of named register. Interesting registers are $esp (stack pointer), $ebp (frame pointer) and $eip (instruction pointer).</li> </ul> <pre><code>(gdb) print n
$1 = 5
(gdb) print/t n
$2 = 101
</code></pre> <p>printf</p> <pre><code>(gdb) printf &quot;%08X\n&quot;, n
00000005
</code></pre> <h3 id=print-array>Print Array</h3> <pre><code>print *array@len
</code></pre> <p>Print the first 3 elements of the Array</p> <pre><code>(gdb) print arr[0]@3
$4 = {1, 2, 3}
</code></pre> <h3 id=display-variables>Display Variables</h3> <pre><code>display/format &lt;what&gt;
</code></pre> <p>Like <code>print</code>, but print the information after each stepping instruction.</p> <p>For this demo</p> <pre><code>(gdb) display i
1: i = 5
(gdb) next
6       printf(&quot;%i\n&quot;, i);
1: i = 5
(gdb) next
5
8       if (i &gt; 0) {
1: i = 5
</code></pre> <h3 id=examining-memory>Examining Memory</h3> <pre><code>x/nfu &lt;address&gt; 

</code></pre> <ul> <li>n: How many units to print (default 1). </li> <li>f: Format character (like „print“).</li> <li>u: Unit.<br> Unit is one of: <br> b: Byte<br> h: Half-word (two bytes)<br> w: Word (four bytes)<br> g: Giant word (eight bytes)). </li> </ul> <p>For this demo,</p> <pre><code>(gdb) x buf1
0x555555756260: &quot;hello world&quot;
(gdb) x/11x buf1
0x555555756260: 0x68    0x65    0x6c    0x6c    0x6f    0x20    0x77    0x6f
0x555555756268: 0x72    0x6c    0x64
</code></pre> <h2 id=examining-the-call-stack>Examining the call stack</h2> <p>Show call stack.</p> <pre><code>backtrace [full]
</code></pre> <p>The command <code>backtrace</code> (or <code>bt</code>) will show you the current function call stack, with the current function at the top, and the callers in order beneath it:</p> <p>Use of the 'full' qualifier also prints the values of the local variables.</p> <pre><code>(gdb) backtrace
#0  recur (i=3) at recurse.c:5
#1  0x0000555555554832 in recur (i=4) at recurse.c:9
#2  0x0000555555554832 in recur (i=5) at recurse.c:9
#3  0x00005555555547dd in main (argc=2, argv=0x7fffffffe3a8) at map.c:29

</code></pre> <h2 id=directory>directory</h2> <pre><code>directory &lt;directory&gt;
</code></pre> <p>Add directory to the list of directories that is searched for sources.</p> <h2 id=listing-source-code>Listing Source Code</h2> <pre><code>list
list &lt;filename&gt;:&lt;function&gt; 
list &lt;filename&gt;:&lt;line_number&gt; 
list &lt;first&gt;,&lt;last&gt;
</code></pre> <p>Shows the current or given source context. The filename may be omitted. If last is omitted the context starting at start is printed instead of centered around it.</p> <pre><code>(gdb) list
22      char *buf1 = malloc(100);
23      /* ... and some more stuff */
24      volatile char *buf2 = malloc(100);
25  
26      sprintf(buf1, &quot;hello world&quot;);
27      recur(n);
28      return 0;
29  }
</code></pre> <h2 id=call-function>Call function</h2> <pre><code>call functionName(args...)
</code></pre> <p>execute arbitrary function and print the result.</p> <pre><code>(gdb) call recur(3)
$1 = 0
</code></pre> <h2 id=informations>Informations</h2> <ul> <li>info breakpoints: Print informations about the breakpoints and watchpoints.</li> <li>info registers: Print values of all registers.</li> <li>info args: Print the arguments to the function of the current stack frame.</li> <li>info display: Print informations about the „displays“.</li> <li>info locals: Print the local variables in the currently selected stack frame.</li> <li>info sharedlibrary: List loaded shared libraries.</li> <li>info signals: List all signals and how they are cur- rently handled.</li> <li>info threads: List all threads.</li> </ul> <h2 id=disassemble>Disassemble</h2> <p>Disassemble the current function or given location.</p> <pre><code>disassemble &lt;where&gt;
</code></pre> <p>For this demo, I have enter into recur function, then I execute <code>disassemble</code>, gdb print out the assembly code of this "recur" function.</p> <pre><code>(gdb) disassemble
Dump of assembler code for function recur:
   0x00005555555547f8 &lt;+0&gt;: push   %rbp
   0x00005555555547f9 &lt;+1&gt;: mov    %rsp,%rbp
   0x00005555555547fc &lt;+4&gt;: sub    $0x20,%rsp
   0x0000555555554800 &lt;+8&gt;: mov    %edi,-0x14(%rbp)
=&gt; 0x0000555555554803 &lt;+11&gt;:    mov    -0x14(%rbp),%eax
   0x0000555555554806 &lt;+14&gt;:    mov    %eax,-0x4(%rbp)
   0x0000555555554809 &lt;+17&gt;:    mov    -0x14(%rbp),%eax
   0x000055555555480c &lt;+20&gt;:    mov    %eax,%esi
   0x000055555555480e &lt;+22&gt;:    lea    0xaf(%rip),%rdi        # 0x5555555548c4
   0x0000555555554815 &lt;+29&gt;:    mov    $0x0,%eax
   0x000055555555481a &lt;+34&gt;:    callq  0x5555555545f0 &lt;printf@plt&gt;
   0x000055555555481f &lt;+39&gt;:    cmpl   $0x0,-0x14(%rbp)
   0x0000555555554823 &lt;+43&gt;:    jle    0x555555554834 &lt;recur+60&gt;
   0x0000555555554825 &lt;+45&gt;:    mov    -0x14(%rbp),%eax
   0x0000555555554828 &lt;+48&gt;:    sub    $0x1,%eax
   0x000055555555482b &lt;+51&gt;:    mov    %eax,%edi
   0x000055555555482d &lt;+53&gt;:    callq  0x5555555547f8 &lt;recur&gt;
   0x0000555555554832 &lt;+58&gt;:    jmp    0x555555554839 &lt;recur+65&gt;
   0x0000555555554834 &lt;+60&gt;:    mov    $0x0,%eax
   0x0000555555554839 &lt;+65&gt;:    leaveq 
   0x000055555555483a &lt;+66&gt;:    retq   
End of assembler dump.

</code></pre> <h2 id=layout>Layout</h2> <ul> <li><code>layout src</code> Standard layout—source on top, command window on the bottom</li> <li><code>layout asm</code> Just like the "src" layout, except it's an assembly window on top</li> <li><code>layout split</code> Three windows: source on top, assembly in the middle, and command at the bottom</li> <li><code>layout reg</code> Opens the register window on top of either source or assembly, whichever was opened last</li> <li><code>tui reg general</code> Show the general registers</li> <li><code>tui reg float</code> Show the floating point registers</li> <li><code>tui reg system</code> Show the "system" registers</li> <li><code>tui reg next</code> Show the next page of registers—this is important because there might be pages of registers that aren't in the "general", "float", or "system" sets</li> </ul> <p>For this demo, when you type <code>layout asm</code> command ,you will see the interface as following <img alt="layout asm" src=../img/AsmLayout.png></p> <p>In asm layout , we can use <code>nexti</code> or <code>stepi</code> command to step to the next asm instruction</p> <h2 id=help>Help</h2> <p><code>help command</code> Get help on a certain command For example</p> <pre><code>help breakpoint 
</code></pre> <h2 id=gdb-dashboard>GDB dashboard</h2> <p><a href=https://github.com/cyrus-and/gdb-dashboard>GDB dashboard</a> is a standalone ".gdbinit" file. Just place ".gdbinit" in your home directory or project directory, for example with:</p> <pre><code>wget -P ~ https://git.io/.gdbinit
</code></pre> <p>Then debug as usual, the dashboard will appear automatically every time the inferior program stops.</p> <p>Optionally install Pygments to enable syntax highlighting:</p> <pre><code>pip install pygments
</code></pre> <p>If it has no effect, execute the following command in the terminal</p> <pre><code>set auto-load local-gdbinit on
</code></pre> <h2 id=some-other-commands>Some other commands</h2> <p><img alt=Commands src=../img/commands1.jpg></p> <blockquote> <p><a href=https://beej.us/guide/bggdb>https://beej.us/guide/bggdb</a><br> <a href=https://wiki.ubuntu.org.cn/用GDB调试程序>https://wiki.ubuntu.org.cn/用GDB调试程序</a><br> <a href=http://www.unknownroad.com/rtfm/gdbtut/gdbtoc.html>http://www.unknownroad.com/rtfm/gdbtut/gdbtoc.html</a><br> <a href=https://sourceware.org/gdb/current/onlinedocs/gdb/ >Official documentation</a></p> </blockquote> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../../GCC/GCC%20Linking/ class="md-footer__link md-footer__link--prev" aria-label="Previous: GCC Linking" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> GCC Linking </div> </div> </a> <a href=../../gdbnotes-x86-64.pdf class="md-footer__link md-footer__link--next" aria-label="Next: Summary of GDB commands" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Summary of GDB commands </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.6c7ad80a.min.js></script> </body> </html>