<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://wangzhengquan.github.io/blog/Linux/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.3.1, mkdocs-material-8.3.9"><title>Linux常用命令 - My Blogs</title><link rel=stylesheet href=../../assets/stylesheets/main.1d29e8d0.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.cbb835fc.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=none data-md-color-accent=none> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#_1 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="My Blogs" class="md-header__button md-logo" aria-label="My Blogs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> My Blogs </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Linux常用命令 </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="My Blogs" class="md-nav__button md-logo" aria-label="My Blogs" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg> </a> My Blogs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> 简介 </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Algorithms <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Algorithms data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Algorithms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Algorithms/Using_a_Stack_to_Evaluate_an_Expression/ class=md-nav__link> Using a Stack to Evaluate an Expression </a> </li> <li class=md-nav__item> <a href=../../Algorithms/Using%20two%20stacks%20to%20Evaluate%20an%20Expression/ class=md-nav__link> Using two stacks to Evaluate an Expression </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3> Linux <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Linux data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Linux常用命令 <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Linux常用命令 </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 系统硬件工具 </a> <nav class=md-nav aria-label=系统硬件工具> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 查看各硬件的型号 </a> </li> <li class=md-nav__item> <a href=#cpu class=md-nav__link> CPU </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 磁盘 </a> </li> <li class=md-nav__item> <a href=#initramfs class=md-nav__link> 查看initramfs </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 系统信息 </a> <nav class=md-nav aria-label=系统信息> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 查看系统信息 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 使用手册查看说明 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 系统进程 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 网络 </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 文件 </a> <nav class=md-nav aria-label=文件> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 文件权限 </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> 文件管理 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grep class=md-nav__link> grep </a> </li> <li class=md-nav__item> <a href=#find class=md-nav__link> find </a> </li> <li class=md-nav__item> <a href=#diff class=md-nav__link> diff </a> </li> <li class=md-nav__item> <a href=#sed class=md-nav__link> sed </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> 压缩与打包 </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> 关机/重启 </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> 用户 </a> </li> <li class=md-nav__item> <a href=#terminal class=md-nav__link> Terminal </a> <nav class=md-nav aria-label=Terminal> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_15 class=md-nav__link> 移动游标 </a> </li> <li class=md-nav__item> <a href=#history class=md-nav__link> history </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> 重定向 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#wget class=md-nav__link> wget </a> </li> <li class=md-nav__item> <a href=#curl class=md-nav__link> curl </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Shell%20Script/ class=md-nav__link> Shell Script </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> MacOS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=MacOS data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> MacOS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../MacOS/Launching%20Custom%20Daemons%20Using%20launchd/ class=md-nav__link> Launching Custom Daemons Using launchd </a> </li> <li class=md-nav__item> <a href=../../MacOS/MacOS%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/ class=md-nav__link> MacOS常用命令 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5> Unbuntu <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Unbuntu data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Unbuntu </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Unbuntu/fix-the-no-wi-fi-adapter-found-error-on-ubuntu/ class=md-nav__link> Fix “No Wi-Fi Adapter Found” Error on Ubuntu </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Vim <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Vim data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Vim </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Vim/vim%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/ class=md-nav__link> Vim常用命令 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> 编辑器 <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=编辑器 data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> 编辑器 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../%E7%BC%96%E8%BE%91%E5%99%A8/Sublime/ class=md-nav__link> Sublime </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> GCC <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=GCC data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> GCC </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../GCC/GCC%20compiling%20processes/ class=md-nav__link> GCC compiling processes </a> </li> <li class=md-nav__item> <a href=../../GCC/GCC%20Linking/ class=md-nav__link> GCC Linking </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_9 type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9> GDB <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=GDB data-md-level=1> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> GDB </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../GDB/gdb%20demo/gdb%20demo/ class=md-nav__link> gdb demo </a> </li> <li class=md-nav__item> <a href=../../GDB/gdbnotes-x86-64.pdf class=md-nav__link> Summary of GDB commands </a> </li> <li class=md-nav__item> <a href=../../GDB/GDB%20Cheat%20Sheet.pdf class=md-nav__link> GDB Cheat Sheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_10 type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10> Markdown <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Markdown data-md-level=1> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Markdown </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Markdown/Markdown%20Syntax/ class=md-nav__link> Markdown Syntax </a> </li> <li class=md-nav__item> <a href=../../Markdown/Markdown%E6%A8%A1%E7%89%88/ class=md-nav__link> Markdown模版 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_11 type=checkbox id=__nav_11> <label class=md-nav__link for=__nav_11> SSH <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=SSH data-md-level=1> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> SSH </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../SSH/SSH%20login%20without%20password/ class=md-nav__link> SSH login without password </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> 系统硬件工具 </a> <nav class=md-nav aria-label=系统硬件工具> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> 查看各硬件的型号 </a> </li> <li class=md-nav__item> <a href=#cpu class=md-nav__link> CPU </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> 磁盘 </a> </li> <li class=md-nav__item> <a href=#initramfs class=md-nav__link> 查看initramfs </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> 系统信息 </a> <nav class=md-nav aria-label=系统信息> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_5 class=md-nav__link> 查看系统信息 </a> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> 使用手册查看说明 </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> 系统进程 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> 网络 </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> 文件 </a> <nav class=md-nav aria-label=文件> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_10 class=md-nav__link> 文件权限 </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> 文件管理 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grep class=md-nav__link> grep </a> </li> <li class=md-nav__item> <a href=#find class=md-nav__link> find </a> </li> <li class=md-nav__item> <a href=#diff class=md-nav__link> diff </a> </li> <li class=md-nav__item> <a href=#sed class=md-nav__link> sed </a> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> 压缩与打包 </a> </li> <li class=md-nav__item> <a href=#_13 class=md-nav__link> 关机/重启 </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> 用户 </a> </li> <li class=md-nav__item> <a href=#terminal class=md-nav__link> Terminal </a> <nav class=md-nav aria-label=Terminal> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_15 class=md-nav__link> 移动游标 </a> </li> <li class=md-nav__item> <a href=#history class=md-nav__link> history </a> </li> <li class=md-nav__item> <a href=#_16 class=md-nav__link> 重定向 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#wget class=md-nav__link> wget </a> </li> <li class=md-nav__item> <a href=#curl class=md-nav__link> curl </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Linux常用命令</h1> <h2 id=_1>系统硬件工具</h2> <h3 id=_2>查看各硬件的型号</h3> <pre><code class=language-bash>lspci
</code></pre> <h3 id=cpu>CPU</h3> <pre><code class=language-bash># 查看cup信息
cat /proc/cpuinfo  

# 查看各级cache大小
getconf -a | grep CACHE


sudo dmidecode  -t 4

# get thread or cpu core count 
nproc
</code></pre> <h3 id=_3>磁盘</h3> <p>参考：<a href=http://linux.vbird.org/linux_basic/0230filesystem.php#lsblk>鸟哥的Linux私房菜-第七章</a> </p> <p>磁盘使用占比 列出系统所有的磁盘分区</p> <pre><code class=language-bash>lsblk -p

lsblk -o NAME,PARTTYPE,MOUNTPOINT
</code></pre> <p>查看磁盘分区文件系统类型</p> <pre><code class=language-bash>sudo parted /dev/sda print
</code></pre> <pre><code class=language-bash># 查看目前挂载的装置/磁盘剩余空间
df -Th 
# 将 /etc 底下的可用磁盘容量以易读的容量格式显示
df -h /etc

# 查看/home目录下各文件占用大小
du -sh /home/*
# 查看 /home目录占用大小
du -sh /home
</code></pre> <p>旧有的MBR分区使用的“磁盘分区”命令</p> <pre><code class=language-bash># 硬盘分区工具 fdisk, cfdisk, sfdisk, GParted
# 查看磁盘分区
fdisk -l
# 磁盘分区
fdisk /dev/sda
</code></pre> <p>Create file system</p> <pre><code class=language-bash># ext4 file system
mkfs -v -t ext4 /dev/&lt;xxx&gt;
# create swap partition file system
mkswap /dev/&lt;yyy&gt;
# enabled 
/sbin/swapon -v /dev/&lt;yyy&gt;
</code></pre> <p>检查和修复损坏的硬盘</p> <pre><code class=language-bash>fsck -C -f -t ext3 /dev/sda1
</code></pre> <p>检查硬盘戒软盘扂区有没有坏轨</p> <pre><code class=language-bash>badblocks -sv /dev/sda
</code></pre> <p>观察文件系统</p> <pre><code class=language-bash>dumpe2fs 
</code></pre> <p>查看硬盘信息 制造商序列号等</p> <pre><code class=language-bash>sudo hdparm -i /dev/sda
 # or
sudo smartctl -a /dev/sda
 ```


###  loop dev
```bash
dd if=/dev/zero of=./rootfs.ext3 bs=1M count=32
mkfs.ext3 rootfs.ext3
sudo mount -o loop xxx.iso  /test/
</code></pre> <h3 id=initramfs>查看initramfs</h3> <pre><code class=language-bash>#看一下 initramfs 裡面的內容有些啥資料？
$ lsinitrd /boot/initramfs-4.18.0-193.el8.x86_64.img

$ mkdir /dev/shm/initramfs
$ cd /dev/shm/initramfs
# 取得 initramfs 前面應該要去除的容量
$ cpio -i -d --no-absolute-filenames   -I /boot/initramfs-4.18.0-193.el8.x86_64.img
  198 blocks
# 這個重點就是在前面的字元佔了幾個 block 容量，每個 block 容量為 512bytes，
# 每一個 initramfs 檔案的前置字元容量都不相同，所以需要先找出來去除才行！

$ dd if=/boot/initramfs-4.18.0-193.el8.x86_64.img of=initramfs.gz bs=512 skip=198

$ file initramfs.gz
  initramfs.gz: gzip compressed data, from Unix, last modified: Mon May  4 17:56:47 2015,max compression

# 3. 從上面看到檔案是 gzip 壓縮檔，所以將它解壓縮後，再查閱一下檔案的類型！
$ gzip -d initramfs.gz

$ file initramfs
  initramfs: ASCII cpio archive (SVR4 with no CRC)

# 解開後又產生一個 cpio 檔案，得要將它用 cpio 的方法解開！加上不要絕對路徑的參數較保險！  
$ cpio -i -d -H newc --no-absolute-filenames &lt; initramfs
</code></pre> <h2 id=_4>系统信息</h2> <h3 id=_5>查看系统信息</h3> <pre><code class=language-bash># 查看系统信息
uname -a
cat /proc/version 

# 内核版本
uname -r
# distribution的版本信息
lsb_release -a 

# 系统架构
arch
file /bin/ls 
# 依据long类型的位数判断安装系统的位数， 一般64位操作系统long类型是64位
get_conf LONG_BIT
</code></pre> <h3 id=_6>使用手册查看说明</h3> <pre><code class=language-bash># 查找系统内跟passwd有关的说明
man -f passwd
# 按关键词查找跟passwd有关的说明
man -k 关键词
</code></pre> <h3 id=_7>系统进程</h3> <pre><code class=language-bash>ps -f -o pid,ppid,tty,stat,wchan,args

# 查看7979 和 29825 进程
ps -p 7979 -p 29825 -o &quot;pid ppid sid tty cmd&quot;
# 杀掉kucker名字的进程
ps -ef | grep &quot;kucker&quot; | awk  '{print $2}' | xargs -i sudo kill -9 {}

</code></pre> <h2 id=_8>网络</h2> <p>查询域名IP</p> <pre><code class=language-bash>dig +norecurse @a.root-servers.net any yahoo.com
dig +norecurse @e.gtld-servers.net any yahoo.com
dig +norecurse @ns1.yahoo.com any yahoo.com

nslookup yahoo.com
nslookup -type=NS yahoo.com
nslookup yahoo.com  ns2.yahoo.com

netstat -a --inet
netstat -tlunp

tcpdump -t -N 'port 80'

</code></pre> <h2 id=_9>文件</h2> <h3 id=_10>文件权限</h3> <pre><code class=language-bash># 改变所属群组  change group
chgrp [-R] 群组名 dirname/filename ...

# 改变档案拥有者 change owner
chown [-R] 账号名 档案戒目彔
chown [-R] 账号名:组名 档案戒目彔

# 改变权限
# 数字类型改变档案权限
chmod [-R] 740 档案目彔

# 符号类型改变档案权限
#       |   u   |   +(加入)   |   r   |
# chmod |   g   |   -(除去)   |   w   |   档案戒目彔
#       |   o   |   =(设定)   |   x   |
#       |   a   |           |       |
chmod u=rwx,go=rx .bashrc
chmod a-x .bashrc

</code></pre> <h3 id=_11>文件管理</h3> <pre><code class=language-bash># 展示目录列表
ls -ld 目录
# 回到上次访问的目录
cd - 
# 进入wzq用户家目录
cd wzq~
</code></pre> <h2 id=grep>grep</h2> <p>替换或删除跨越多个目录的多个文件里的指定文本</p> <pre><code class=language-bash># 替换当前目录下所有文件里的‘window’为‘linux’
grep -rl 'windows' ./ | xargs sed -i 's/windows/linux/g'
# Mac下sed命令的&quot;-i&quot;选项后面需要加字符串表示备份文件的后缀
grep -rl 'windows' ./ | xargs sed -i ''  's/windows/linux/g'

#删除出现‘windows’的行
grep -rl 'windows' ./ | xargs sed -i ''   '/windows/d'

</code></pre> <p>统计某个词语在文件中出现的次数</p> <pre><code class=language-bash># count the number of occurrence of a word in a text file
grep -o -i 'word' test.txt | wc -l
</code></pre> <h2 id=find>find</h2> <pre><code class=language-bash>find . -name &quot;*nng*&quot; -exec rm -rf {} \;

find /usr/{lib,libexec} -name \*.la -delete

find /usr -depth -name $(uname -m)-lfs-linux-gnu\* | xargs rm -rf

find $(1) -not -type d -and -not -type l -print0 | xargs -0r chmod $(FILE_MODE)
</code></pre> <h2 id=diff>diff</h2> <pre><code class=language-bash>方法一：
diff -bur [oldDir] [newDir]
方法二：
rsync -rcnv [oldDir] [newDir]
</code></pre> <h2 id=sed>sed</h2> <p><a href=https://www.grymoire.com/Unix/Sed.html>https://www.grymoire.com/Unix/Sed.html</a></p> <h2 id=_12>压缩与打包</h2> <pre><code class=language-bash>[dmtsai@study ~]$ tar [-z|-j|-J] [cv] [-f 待建立的新檔名] filename... &lt;==打包與壓縮
[dmtsai@study ~]$ tar [-z|-j|-J] [tv] [-f 既有的 tar檔名]             &lt;==察看檔名
[dmtsai@study ~]$ tar [-z|-j|-J] [xv] [-f 既有的 tar檔名] [-C 目錄]   &lt;==解壓縮
選項與參數：
-c  ：建立打包檔案，可搭配 -v 來察看過程中被打包的檔名(filename)
-t  ：察看打包檔案的內容含有哪些檔名，重點在察看『檔名』就是了；
-x  ：解打包或解壓縮的功能，可以搭配 -C (大寫) 在特定目錄解開
      特別留意的是， -c, -t, -x 不可同時出現在一串指令列中。
-z  ：透過 gzip  的支援進行壓縮/解壓縮：此時檔名最好為 *.tar.gz
-j  ：透過 bzip2 的支援進行壓縮/解壓縮：此時檔名最好為 *.tar.bz2
-J  ：透過 xz    的支援進行壓縮/解壓縮：此時檔名最好為 *.tar.xz
      特別留意， -z, -j, -J 不可以同時出現在一串指令列中
-v  ：在壓縮/解壓縮的過程中，將正在處理的檔名顯示出來！
-f filename：-f 後面要立刻接要被處理的檔名！建議 -f 單獨寫一個選項囉！(比較不會忘記)
-C 目錄    ：這個選項用在解壓縮，若要在特定目錄解壓縮，可以使用這個選項。

其他後續練習會使用到的選項介紹：
-p(小寫) ：保留備份資料的原本權限與屬性，常用於備份(-c)重要的設定檔
-P(大寫) ：保留絕對路徑，亦即允許備份資料中含有根目錄存在之意；
--exclude=FILE：在壓縮的過程中，不要將 FILE 打包！ 
</code></pre> <p>壓　縮：tar -jcv -f filename.tar.bz2 要被壓縮的檔案或目錄名稱 查　詢：tar -jtv -f filename.tar.bz2 解壓縮：tar -jxv -f filename.tar.bz2 -C 欲解壓縮的目錄</p> <p>实例：</p> <pre><code class=language-bash># 解压tar.bz2文件
tar xvfj ./linux-2.6.23.tar.bz2 
tar xvfJ ./linux-2.6.23.tar.xz
tar xvfz ./linux-2.6.23.tar.gz
tar -xf ./linux-2.6.23.tar.*


# 解压python-3.9.0-docs-html.tar.bz2到/usr/share/doc/python-3.9.0/html
tar --strip-components=1 \
--no-same-owner \
--no-same-permissions \
-C /usr/share/doc/python-3.9.0/html \
-xvf ../python-3.9.0-docs-html.tar.bz2

# --no-same-owner and --no-same-permissions
# Ensure the installed files have the correct ownership and permissions.
# Without these options, using tar will install the package files with the upstream creator's values.

# 当前目录压缩打包到/home/wzq/lfs/lfs-2.tar.xz
tar -cJpf /home/wzq/lfs/lfs-2.tar.xz .
# 解压导当前目录
tar -xpf $HOME/lfs-temp-tools-10.0-systemd.tar.xz
</code></pre> <h2 id=_13>关机/重启</h2> <pre><code class=language-bash># 未保存的内存数据写入硬盘
sync
# 立刻关机，其中 now 相当亍时间为 0 的状态
shutdown -h now
# 系统在今天的 20:25 分会关机，若在 21:25 才下达此挃令，则隑天才关机
shutdown -h 20:25
# 系统再过十分钟后自劢关机
shutdown -h +10
# 系统立刻重新启劢
shutdown -r now
# 再过三十分钟系统会重新启劢，幵显示后面的讯息给所有在在线的使用者
shutdown -r +30 'The system will reboot'
# 仅发出警告，系统并不会关机啦!吓唬人!
shutdown -k now 'This system will reboot'
# 重新启劢，关机，断电
reboot, halt, poweroff
</code></pre> <h2 id=_14>用户</h2> <p>add the new user lfs</p> <pre><code class=language-bash>groupadd lfs
useradd -s /bin/bash -g lfs -m -k /dev/null lfs
passwd lfs

# add user lfs to group wheel
usermod -a -G wheel lfs
</code></pre> <h2 id=terminal>Terminal</h2> <h3 id=_15>移动游标</h3> <ul> <li>從游標處向前刪除指令串 ([ctrl]+u); 向後刪除指令串 ([ctrl]+k)。</li> <li>讓游標移動到整個指令串的最前面 ([ctrl]+a) 或最後面 ([ctrl]+e)。</li> </ul> <h3 id=history>history</h3> <pre><code class=language-bash># number  ：執行第幾筆指令的意思；
!number
# command ：由最近的指令向前搜尋『指令串開頭為 command』的那個指令，並執行；
!command
# 執行上一個指令(相當於按↑按鍵後，按 Enter)
!!  

</code></pre> <h3 id=_16>重定向</h3> <pre><code class=language-bash># 將指令的資料全部寫入名為 list 的檔案中
find /home -name .bashrc &gt; list 2&gt;&amp;1 
</code></pre> <h2 id=wget>wget</h2> <pre><code class=language-bash>wget --input-file=wget-list --continue --directory-prefix=target-directory
</code></pre> <h2 id=curl>curl</h2> <pre><code class=language-bash>
#-o, --output &lt;file&gt;: Write  output  to &lt;file&gt; instead of stdout.
curl https://github.com/ginuerzh/gost/releases/download/v2.11.1/gost-linux-amd64-2.11.1.gz --output gost.gz

# -O, --remote-name: Write output to a local file named like the remote file we get
curl -O https://github.com/ginuerzh/gost/releases/download/v2.11.1/gost-linux-amd64-2.11.1.gz
</code></pre> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../Algorithms/Using%20two%20stacks%20to%20Evaluate%20an%20Expression/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Using two stacks to Evaluate an Expression" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Using two stacks to Evaluate an Expression </div> </div> </a> <a href=../Shell%20Script/ class="md-footer__link md-footer__link--next" aria-label="Next: Shell Script" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Shell Script </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script> <script src=../../assets/javascripts/bundle.6c7ad80a.min.js></script> </body> </html>